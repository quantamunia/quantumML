<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bootstrap Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
  </head>
  <body>
    <div class="container-fluid">
      <div class="row">
        <div class="col-md-3">
          <!-- Sidebar with input elements -->
		  
		  
          <div class="card">
		  
		  
            <div class="card-body">
			
					  <!-- Button trigger modal -->
<button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">
Quantum-ML Terminology  <i class="fa fa-hand-pointer-o" aria-hidden="true"></i>
</button>

<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
    
	
		
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
	 
	 
	 
	 

	  
	  
	  
	  
	  
	  
	      <h3 class="modal-title fs-5" id="exampleModalLabel">Feature Map Circuit</h3><br>
        <p>is a quantum circuit or transformation that encodes classical data into a quantum state. It takes classical input data, such as numerical features or patterns, and maps them to a quantum state representation."</p>
      </div>
	  
	  
	  <div class="modal-body">
	      <h3 class="modal-title fs-5" id="exampleModalLabel">Ansatz Circuit</h3><br>
		<p> The term 'ansatz' originates from the German word meaning 'assumption' or 'initial guess.' In quantum computing, an ansatz circuit is constructed by combining a set of quantum gates and operations, where certain parameters are left unspecified"</p>
	  </div>
	  
	  <div class="modal-body">
	      <h3 class="modal-title fs-5" id="exampleModalLabel">PCA</h3><br>
		<p>PCA is often used as a preprocessing step in machine learning and data analysis to reduce the dimensionality of high-dimensional datasets. By reducing the number of variables, PCA can simplify the data representation, remove noise, and improve computational efficiency.</p>
	  </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        
      </div>
    </div>
  </div>
</div>
<br><br>
         
              <!-- <h5 class="card-title">Dashboard</h5>-->
              <form method="POST" action="/"> 
                <div class="col">
                  <div class="card mb-4 rounded-3 shadow-sm">
                    <div class="card-header py-2">
                      <h6 class="my-0 fw-normal">Initial Parameters</h6>
                    </div>
                    <div class="card-body align-items-left ">
                      <select class="form-select form-select-sm" aria-label=".form-select-sm example" name="model">
                        <option selected="">Models</option>
                        <option value="VQC/MLP">VQC/MLP</option>
                        <option value="QSVM/SVM">QSVM/SVM</option>
                        <option value="QSVC/SVC">QSVC/SVC</option>
                        <option value="VQC/LR">VQC/LR</option>
                      </select>
                      <br>
                      <select class="form-select form-select-sm" aria-label=".form-select-sm example" name="dataset">
                        <option selected="">Datasets</option>
                        <option value="iris">Iris</option>
						<option value="wine">Wine</option>
                        <option value="diabetes">Diabetes</option>
                        <option value="cancer">Breast Cancer</option>
						
                      </select>
                      <br>
                      <select class="form-select form-select-sm" aria-label=".form-select-sm example" name="split">
                        <option selected="">Train_Test_split Values</option>
                        <option value="80/20">80/20</option>
                        <option value="70/30">70/30</option>
                      </select>
                      <br>
                      <select class="form-select form-select-sm" aria-label=".form-select-sm example" name="pca">
                        <option selected="">PCA Values</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10</option>
                      </select>
                      <br>
                      <select class="form-select form-select-sm" aria-label=".form-select-sm example" name="featuremap">
                        <option selected="">Feature Map</option>
                        <option value="z">ZFeatureMap</option>
                        <option value="zz">ZZFeatureMap</option>
                        <option value="pauli">PauliFeatureMap</option>
                      </select>
                      <br>
                      <select class="form-select form-select-sm" aria-label=".form-select-sm example" name="entang">
                        <option selected="">Entanglements</option>
                        <option value="full">Full</option>
                        <option value="linear">LInear</option>
                      </select>
                      <br>
					  
                    </div>
                  </div>
                </div>
            
              <div class="col">
                <div class="card mb-4 rounded-3 shadow-sm ">
                  <div class="card-header py-2 ">
                    <h6 class="my-0 fw-normal">Optimizers</h6>
                  </div>
                  <div class="card-body">
                    <select class="form-select form-select-sm" aria-label=".form-select-sm example" name="optimizer">
                      <option selected="">optimizer type</option>
                      <option value="adam">Adam</option>
                      <option value="cobyla">Cobyla</option>
                      <option value="spsa">Spsa</option>
                    </select>
                    <!--
    <div class="form-check"><input class="form-check-input" type="radio" name="optimizer" value="coby" id="flexRadioDefault5"><label class="form-check-label" for="flexRadioDefault5">
    Cobyla 
  </label></div><div class="form-check"><input class="form-check-input" type="radio" name="optimizer" value="spsa" id="flexRadioDefault6"><label class="form-check-label" for="flexRadioDefault6">
    Spsa
  </label></div><div class="form-check"><input class="form-check-input" type="radio" name="optimizer" value="spsa" id="flexRadioDefault6"><label class="form-check-label" for="flexRadioDefault6">
    Adam
  </label></div>
-->
                    <br>
                 
                  </div>
                </div>
              </div>
              <!-- Add more input elements here -->
          
		   <div class="col">
                <div class="card mb-4 rounded-3 shadow-sm ">
                  <div class="card-header py-2 ">
                    <h6 class="my-0 fw-normal">Tips </h6>
                  </div>
                  <div class="card-body">
                   <p class="fst-italic fs-6 text">  For a faster demo, choose: <br><br>
				   - lower PCA values <br>
				   - linear entanglement <br>
				   - Cobyla optmiser
					
					</div>
					</div>
					</div>
		  
		  
		  
		  
		  
            </div>
          </div>
        </div>
        <div class="col-md-9">
          <!-- Main content area 
        <h3>Exploring Quantum Machine Learning</h3>-->
          <br>
          <div class="d-flex justify-content-between align-items-center mb-3">
            <h4>Exploring Quantum Machine Learning</h4>
                <button type="submit" type="button" class="btn btn-primary">
              <i class="fas fa-cog"></i> Initialise Model </button>
          </div>
         </form>
		  
            <div class="col">
              <div class="card shadow-sm">
                <img class="img-fluid rounded mx-auto d-block" src="data:image/png;base64,{{ fmap }}" alt="Circuit">
                <div class="card-body">
                  <div class="d-inline">
           
                  </div>
                </div>
              </div>
            </div>
			<br>
            <div class="col">
              <div class="card shadow-sm lh-lg">
                <img class="img-fluid rounded mx-auto d-block lh-lg" src="data:image/png;base64,{{ ans }}" alt="Circuit">
                <br>
                <div class="card-body lh-lg"">
				
                </div>
              </div>
            </div>
			 <div class="b-example-divider"></div>
	<div class=" row row-cols-1 row-cols-sm-2 g-3">
            <div class="b-example-divider"></div>
            <div class="b-example-divider"></div>
            <!-- Modal -->
            <div class="modal fade" id="settingsModal" tabindex="-1" aria-labelledby="settingsModalLabel" aria-hidden="true">
              <div class="modal-dialog">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title" id="settingsModalLabel">Azure Quantum Configuration</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <div class="modal-body">
                    <input type="text" class="form-control mb-3" placeholder="Resource ID URL">
                    <select class="form-select">
                      <option selected="">Backends</option>
                      <option value="option1">ionq</option>
                      <option value="option2">quantinuum</option>
                      <option value="option3">qasm</option>
                    </select>
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">Save changes</button>
                  </div>
                </div>
              </div>
            </div>
            <div class="col">
              <div class="card shadow-sm ">
                <div class="card-body ">
                  <div class="row lh-lg ">
                    <div class="col-md-4"> Quantum Library: <br>
                    </div>
                    <div class="col-md-4">
                      <span>IBM Qiskit</span>
                      <br>
                    </div>
                    <div class="col-md-4">
                      <i class="fa fa-check-circle text-success"></i>
                      <br>
                    </div>
                  </div>
                  <div class="row lh-lg lh-lg">
                    <br>
                    <div class="col-md-4"> Cloud Platform : <br>
                    </div>
                    <div class="col-md-4">
                      <span>Azure Quantum</span>
                      <br>
                    </div>
                    <div class="col-md-4">
                      <i class="fa fa-check-circle text-success"></i>
                      <br>
                    </div>
                  </div>
                  <div class="row lh-lg lh-lg">
                    <br>
                    <div class="col-md-4"> Backend : <br>
                    </div>
                    <div class="col-md-4">
                      <span>ionq.simulator</span>
                      <br>
                    </div>
                    <div class="col-md-4">
                      <i class="fa fa-check-circle text-success"></i>
                      <br>
                    </div>
                  </div>
                  <div class="row lh-lg lh-lg">
                    <br>
                    <div class="col-md-4"> dataset size : <br>
                    </div>
                    <div class="col-md-4">
                      <span>150</span>
                      <br>
                    </div>
                    <div class="col-md-4">
                      <i class="fa fa-check-circle text-success"></i>
                      <br>
                    </div>
                  </div>
                  <div class="row lh-lg lh-lg">
                    <br>
                    <div class="col-md-4"> Name of dataset: <br>
                    </div>
                    <div class="col-md-4">
                      <span>{{ dname }}</span>
                      <br>
                    </div>
                    <div class="col-md-4">
                      <i class="fa fa-check-circle text-success"></i>
                      <br>
                    </div>
                  </div>
                  <div class="row lh-lg lh-lg">
                    <br>
                    <div class="col-md-4"> No.PCA values: <br>
                    </div>
                    <div class="col-md-4">
                      <span>{{ pcano }}</span>
                      <br>
                    </div>
                    <div class="col-md-4">
                      <i class="fa fa-check-circle text-success"></i>
                      <br>
                    </div>
                  </div>
                  <div class="row lh-lg lh-lg">
                    <br>
                    <div class="col-md-4"> No. of samples: <br>
                    </div>
                    <div class="col-md-4">
                      <span>{{ samples }}</span>
                      <br>
                    </div>
                    <div class="col-md-4">
                      <i class="fa fa-check-circle text-success"></i>
                      <br>
                    </div>
                  </div>
                  <div class="row lh-lg lh-lg">
                    <br>
                    <div class="col-md-4"> Entanglement: <br>
                    </div>
                    <div class="col-md-4">
                      <span>{{ ent }}</span>
                      <br>
                    </div>
                    <div class="col-md-4">
                      <i class="fa fa-check-circle text-success"></i>
                      <br>
                    </div>
                  </div>
                  <div class="row lh-lg lh-lg">
                    <br>
                    <div class="col-md-4"> Optimizer type: <br>
                    </div>
                    <div class="col-md-4">
                      <span>{{ opt }}</span>
                      <br>
                    </div>
                    <div class="col-md-4">
                      <i class="fa fa-check-circle text-success"></i>
                      <br>
                    </div>
                  </div>
                  <div class="row lh-lg lh-lg">
                    <br>
                    <div class="col-md-4"> Type of Model: <br>
                    </div>
                    <div class="col-md-4">
                      <span>{{ mod }}</span>
                      <br>
                    </div>
                    <div class="col-md-4">
                      <i class="fa fa-check-circle text-success"></i>
                      <br>
                    </div>
                  </div>
                  <div class="row lh-lg lh-lg">
                    <br>
                    <div class="col-md-4"> No. of features: <br>
                    </div>
                    <div class="col-md-4">
                      <span>{{ f_no }}</span>
                      <br>
                    </div>
                    <div class="col-md-4">
                      <i class="fa fa-check-circle text-success"></i>
                      <br>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col lh-lg">
              <div class="card shadow-sm lh-lg">
                <img id="graph" class="img-fluid rounded mx-auto d-block" src="{{ url_for('static', filename='graph.jpg') }}" alt="Objective function graph">
                <div class="card-body lh-lg"></div>
              </div>
            </div>
          </div>
          <!--<div class="col"><div class="card shadow-sm"><div class="card-body"><h6 class="my-0 fw-normal">..... Training in Progress</h6><img id="graph" class="img-fluid rounded mx-auto d-block" src="{{ url_for('static', filename='graph.jpg') }}" alt="Objective function graph" ></div></div></div>
	-->
          <br>
		  
		  
          <br>
		   
  
		      <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#settingsModal">
                <i class="fas fa-cog"></i> Azure Settings </button>
          <button id="start-button" class="btn btn-primary mt-3">Deploy to Azure Quantum Workspace</button>
          <br>
          <br>
          <br>
          <div id="progress-container" style="display: none;">
            <div class="progress">
              <div id="progress-bar" class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
            </div>
            <p id="status-message"></p>
            <div id="loading-spinner" class="spinner-border" role="status" style="display: none;">
              <span class="sr-only">Loading...</span>
            </div>
          </div>
          <br>
          <div class=" row row-cols-1 row-cols-sm-2 g-3">
            <div class="col">
              <div class="card shadow-sm">
                <img id="histogram" class="img-fluid rounded mx-auto d-block" src="{{ url_for('static', filename='histogram.jpg') }}" alt="Objective function graph">
                <div class="card-body">
                  <div class="d-inline">
                    <button type="button" class="btn btn-outline-primary" data-bs-toggle="tooltip" data-bs-placement="top" title="The plot_histogram function in Qiskit is used to visualize the measurement results obtained from a quantum circuit execution. The x-axis represents the possible measurement outcomes and the y-axis represents the frequency of each outcome.This visualization helps you understand the probability distribution of the measurement results obtained from your quantum circuit execution.the values 1, 2, 3, 4 along the x-axis of the histogram correspond to the measurement outcomes or bit strings obtained from the quantum circuit.For example, if you have a quantum circuit with two qubits, the measurement outcomes can be 00, 01, 10, or 11, which correspond to the decimal numbers 0, 1, 2, and 3 respectively">Azure Quantum Histogram</button>
                  </div>
                </div>
              </div>
            </div>
            <div class="col">
              <div class="card shadow-sm lh-lg">
                <br>
                <div class="card-body lh-lg"">
																																																																														<p>Accuracy, F-measure, Recall, Precision</p>
																																																																														<img class="img-fluid rounded mx-auto d-block lh-lg" src="data:image/png;base64,{{ bar }}" alt="Circuit">
																																																																														<button type=" button" class="btn btn-outline-primary data-bs-toggle=" tooltip" data-bs-placement="top" title="">Evaluation Metrics</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.0.2/js/bootstrap.bundle.min.js"></script>
    <script>
      function updateGraph() {
        $.ajax({
          url: '/get_graph_data',
          method: 'GET',
          success: function(response) {
            var graphSrc = response.graph_src;
            $('#graph').attr('src', graphSrc);
          },
          complete: function() {
            setTimeout(updateGraph, 2000); // Update the graph every 3 seconds
          }
        });
      }
      $(document).ready(function() {
        updateGraph();
        updateHist();
      });
    </script>
    <script>
      function updateHist() {
        $.ajax({
          url: '/get_hist',
          method: 'GET',
          success: function(response) {
            var histSrc = response.hist_src;
            $('#histogram').attr('src', histSrc);
          },
          complete: function() {
            setTimeout(updateHist, 4000); // Update the graph every 3 seconds
          }
        });
      }
      $(document).ready(function() {
        updateHist();
      });
    </script>
    <!--
	<script>
  function updateProgress(progress) {
  // Update the progress bar width and aria-valuenow attribute
  const progressBar = document.getElementById('progress-bar');
  progressBar.style.width = progress * 100 + '%';
  progressBar.setAttribute('aria-valuenow', progress * 100);

  // Update the status message
  const statusMessage = document.getElementById('status-message');
  statusMessage.innerText = 'Progress: ' + Math.round(progress * 100) + '%';

  // Hide the progress bar and button if the progress is 100%
  if (progress === 1.0) {
    progressBar.classList.add('progress-bar-striped', 'progress-bar-animated');
    document.getElementById('start-button').style.display = 'none';
    progressBar.style.display = 'none';
  }
}

  function startQuantumJob() {
    // Make the progress bar visible
    document.getElementById('progress-bar').style.display = 'block';

    // Start the quantum job
    $.getJSON('/quantum_job', function(data) {
      if (data.result === 'success') {
        // Job started successfully
        updateProgress(0); // Reset the progress bar
        checkQuantumJob(); // Start checking the job progress
      } else if (data.result === 'training_in_progress') {
        // Job already in progress, update the progress bar accordingly
        updateProgress(data.progress);
        checkQuantumJob(); // Continue checking the job progress
      } else {
        // Job not started or encountered an error
        console.log('Job not started or error occurred.');
      }
    });
  }

  function checkQuantumJob() {
    $.getJSON('/quantum_job', function(data) {
      if (data.result === 'success') {
        // Job completed successfully
        updateProgress(data.progress);
        console.log('Job completed:', data.data);
      } else if (data.result === 'training_in_progress') {
        // Job still in progress
        updateProgress(data.progress);
        setTimeout(checkQuantumJob, 1000); // Check again after 1 second
      } else {
        // Training not started or encountered an error
        console.log('Training not started or error occurred.');
      }
    });
  }

  $(document).ready(function() {
    // Attach click event handler to the Start button
    $('#start-button').click(startQuantumJob);
  });
</script>
-->
    <script>
      function updateProgress(progress) {
        const progressBar = document.getElementById('progress-bar');
        progressBar.style.width = progress + '%';
        progressBar.setAttribute('aria-valuenow', progress);
        const statusMessage = document.getElementById('status-message');
        statusMessage.innerText = 'Progress: ' + progress + '%';
        if (progress === 100) {
          progressBar.classList.remove('progress-bar-animated');
        }
      }
      document.getElementById('start-button').addEventListener('click', function() {
        // Show the progress container
        document.getElementById('progress-container').style.display = 'block';
        // Show the loading spinner
        document.getElementById('loading-spinner').style.display = 'block';
        // Reset the progress bar
        updateProgress(0);
        // Perform the quantum job
        $.getJSON('/quantum_job', function(data) {
          // Hide the loading spinner and hide button
          document.getElementById('start-button').style.display = 'none';
          document.getElementById('loading-spinner').style.display = 'none';
          if (data.result === 'success') {
            // Job completed successfully
            updateProgress(100);
            console.log('Job completed:', data.data);
          } else if (data.result === 'training_in_progress') {
            // Update progress asynchronously
            setTimeout(function checkProgress() {
              $.getJSON('/quantum_job', function(progressData) {
                if (progressData.result === 'training_in_progress') {
                  // Job still in progress
                  updateProgress(progressData.progress);
                  setTimeout(checkProgress, 1000); // Check again after 1 second
                } else {
                  // Job completed or encountered an error
                  if (progressData.result === 'success') {
                    updateProgress(100);
                    console.log('Job completed:', progressData.data);
                  } else {
                    console.log('Training not started or error occurred.');
                  }
                }
              });
            }, 1000);
          } else {
            // Training not started or encountered an error
            console.log('Training not started or error occurred.');
          }
        });
      });
    </script>
  </body>
</html>